{% extends 'base.html' %}

{% block title %}Mountain Inventory{% endblock %}
  

{% block breadcrumb %}
<ol class="breadcrumb my-4">
  <li class="breadcrumb-item">Dashboard</li>
</ol>
 
{% endblock %}

{% load tz %}

{% block content %}

<div class="flex flex-col md:flex-row gap-4">
  <div class="bg-white rounded-lg shadow-md p-6 flex-1">
    <h2 class="text-xl font-semibold mb-4 text-gray-800">
      <a href="/jobs" class="text-gray-800 hover:text-gray-600">Jobs:</a>
    </h2>
    <div class="h-64 overflow-y-auto">
      <table class="w-full">
        <thead>
          <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
            <th class="py-3 px-6">Job</th>
            <th class="py-3 px-6">Worked On?</th>
            <th class="py-3 px-6">Total Hours</th>
          </tr>
        </thead>
        <tbody class="text-gray-600 text-sm font-light">
          {% for job in jobs %}
          <tr class="border-b border-gray-200 hover:bg-gray-100">
            <td class="py-3 px-6 font-medium">{{ job.name }}</td>
            <td class="py-3 px-6">
              {% if job.isBeingWorkedOn == True %}
              <span class="bg-green-200 text-green-800 px-2 py-1 rounded-full">&#10004;</span>
              {% else %}
              <span class="bg-red-200 text-red-800 px-2 py-1 rounded-full">&#10006;</span>
              {% endif %}
            </td>
            <td class="py-3 px-6">{{ job.totalHours|floatformat:"-3" }}</td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <div class="bg-white rounded-lg shadow-md p-6 flex-1">
    <h2 class="text-xl font-semibold mb-4 text-gray-800">
      <a href="/tools" class="text-gray-800 hover:text-gray-600">Supplies:</a>
    </h2>
    <div class="h-64 overflow-y-auto">
      <table class="w-full">
        <thead>
          <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
            <th class="py-3 px-6">Supply</th>
            <th class="py-3 px-6">Enough Supply?</th>
          </tr>
        </thead>
        <tbody class="text-gray-600 text-sm font-light">
          {% for supply in supplys %}
          <tr class="border-b border-gray-200 hover:bg-gray-100">
            <td class="py-3 px-6 font-medium">{{ supply.name }}</td>
            <td class="py-3 px-6">
              {% if supply.isLow %}
              <span class="bg-red-200 text-red-800 px-2 py-1 rounded-full">&#10006;</span>
              {% else %}
              <span class="bg-green-200 text-green-800 px-2 py-1 rounded-full">&#10004;</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>

<div class="flex flex-col md:flex-row gap-4 mt-4">
  <div class="bg-white rounded-lg shadow-md p-6 flex-1">
    <h2 class="text-xl font-semibold mb-4 text-gray-800">
      <a href="/jobs" class="text-gray-800 hover:text-gray-600">Kiln:</a>
    </h2>
    <table class="w-full">
      <thead>
        <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
          <th class="py-3 px-6">Kiln Name</th>
          <th class="py-3 px-6">Is Filled?</th>
          <th class="py-3 px-6">Time Filled</th>
        </tr>
      </thead>
      <tbody class="text-gray-600 text-sm font-light">
        {% for kiln in kilns %}
        <tr class="border-b border-gray-200 hover:bg-gray-100">
          <td class="py-3 px-6 font-medium">{{ kiln.name }}</td>
          <td class="py-3 px-6">
            {% if kiln.isFilled %}
            <span class="bg-green-200 text-green-800 px-2 py-1 rounded-full">&#10004;</span>
            {% else %}
            <span class="bg-red-200 text-red-800 px-2 py-1 rounded-full">&#10006;</span>
            {% endif %}
          </td>
          <td class="py-3 px-6">{{ kiln.timeFilled }}</td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>

  <div class="bg-white rounded-lg shadow-md p-6 flex-1">
    <h2 class="text-xl font-semibold mb-4 text-gray-800">
      <a href="/logs" class="text-gray-800 hover:text-gray-600">Logs:</a>
    </h2>
    <div class="h-64 overflow-y-auto">
      <table class="w-full">
        <thead>
          <tr class="bg-gray-200 text-gray-600 uppercase text-sm leading-normal">
            <th class="py-3 px-6">Action</th>
            <th class="py-3 px-6">User</th>
            <th class="py-3 px-6">Subject</th>
            <th class="py-3 px-6">Time</th>
          </tr>
        </thead>
        <tbody class="text-gray-600 text-sm font-light">
          {% for log in logs %}
          <tr class="border-b border-gray-200 hover:bg-gray-100">
            <td class="py-3 px-6 font-medium">{{ log.action }}</td>
            <td class="py-3 px-6">{{ log.user }}</td>
            <td class="py-3 px-6">{{ log.subject }}</td>
            <td class="py-3 px-6">
              {% timezone "America/New_York" %}
              {{ log.time }}
              {% endtimezone %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
</div>



{% endblock %}